# Text-generation

## Открытие файлов
Утилита открывает только тексты с расширением *.txt.

## Файл train.py
В train доступны 5 функций:
1. --input-dir - путь к директории, в которой лежит коллекция документов. Если данный аргумент не задан, считается, что тексты вводятся из stdin. Остановка потока достигается путем ввода "~stop".
2. --model - путь к файлу, в который сохраняется модель.
3. --lc - необязательный аргумент. Приводить тексты к lowercase.
4. --help - выводит список команд в консоль

Пример ввода команды:
1. --input-dir . --model model.pickle
2. --lc --input-dir /home/.../text.txt --model /home/.../model.pickle

Схема работы:
1. получили команду, передали её в функцию train:
    1. если "--lc" написано, то ставим флаг is_lowering, чтобы потом это учесть
    2. если не указан путь, куда сохранить модель, то выводим ошибку;
    3. если путь в папку указан, то в file_txt сохранили все названия файлов, которые заканчиваются на "txt", обрабатываем все файлы, сохраняем полученную модель с помощью pickle;
    4. если путь не указан, то считываем текст из потока ввода, при нажатии ctrl+d сохраняем модель.

2. создали diction, в котором будет храниться наша модель. Храниться так: `dict[dict[list]]`, где первый dict будет хранить первое слово из пары и второй dict. Второй dict будет хранить второе слово из пары и количество раз, которое программа встретила в тексте эту пару при своем обходе.

3. если указан путь до документов, то: 
    1. попадаем в цикл, в котором мы посетим все файлы, названия которых указаны в file_txt. 
    2. открываем файл, начинаем считывать строки. Если строка состоит из '\n', то пропускаем её.
    3. запускаем функцию processing, которая вернет нам словарь, в котором уже есть обработанная строка. Функция processing будет описана далее. Если путь до документов не указан, то:
        1. считываем строку из потока ввода, обрабатываем её;
        2. при нажатии ctrl+d сохраняем модель с помощью pickle.

## Файл generate.py
В generate доступны 5 функции:
1. --help - выводит список команд в консоль;
2. --model - путь к файлу, из которого загружается модель;
3. --seed - Начальное слово. Если не указано, выбирается слово случайно из всех слов (не учитывая частоты);
4. --length - длина генерируемой последовательности;
5. --output - путь, куда сохранится цепочка слов.

Пример ввода команды:
1. --model /home/.../model.pickle --length 10 --seed example
2. --model model.pickle -- length 40 --output new_text.txt
    
Схема работы:
1. считывается команда
2. записывается путь, длина последовательности, начальное слово (если оно есть), если его нет, то выбираем случайное. Ставим флаг is_file, если путь до файла, куда нужно сохранить получившуюся цепочку слов; Переходим в model.pickle.
3. загружаем словарь. Заполняем лист possible_first_words, в котором будут храниться все первые слова из пар;
4. если пользователь не ввел начальное слово, то рандомно его выбираем из всех первых слов;
5. создаем text, в котором будет последовательность слов. Добавляем в нее seed; 
6. заходим в цикл от 0 до length (длину последовательности);
7. создаем list_next_word, в котором будут храниться все вторые слова первого слова; создаем list frequency, в котором будут храниться частоту слов соответствующие list_next_word; создаем number, в котором будет храниться суммарная частота всех слов в list_next_word;
8. случайно выбираем слово из list_next_words и добавляем его в text;
9. если последнего слова в text нет в списке первых слов, то берем случайное слово из первых слов и добавляем его в text; Переходим в model.pickle.
10. печатаем все элементы text в файл или в поток вывода, в зависимости от is_file.
    
    